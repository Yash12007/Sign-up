<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Yash12007 | A software development company | Sign up</title>
    <link rel="icon" href="https://icons.getbootstrap.com/assets/icons/box.svg">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  </head>
  <style>
    body{
        background: black;
        color: white;
        overflow: auto;
    }
    #signup-box{
        position: absolute;
        top: 55px;
        left: 10%;
        right: 10%;
        height: 100%;
        width: 80%;
        place-items: center;
        display: grid;
        overflow: auto;
    }
    #load{
        background-image: linear-gradient(to right, cyan, blue);
        position: absolute;
        top: 55px;
        left: 0;
        height: 3px;
        width: 100%;
        animation: 1.5s loading;
    }
    @keyframes loading {
        0%{
            width: 0%;
        }
        100%{
            width: 100%;
        }
    }
  </style>
  <body data-bs-theme="dark">
    <div id="signup-box">
        <div class="card" style="width: fit-content;">
            <img src="https://icons.getbootstrap.com/assets/icons/box.svg" class="card-img-top" alt="Logo." width="150px" height="150px">
            <div class="card-body">
              <h5 class="card-title">Sign up to Yash12007</h5>
              <p class="card-text">
                Welcome to Yash12007, a software development company dedicated to providing high-quality software & solutions.
                <br>
                <a href="https://yash12007.github.io/Max">View documentation</a>
              </p>
              <a onclick='signInWithGoogle()' class="btn btn-primary">
                <i class="bi bi-google"></i>
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-google" viewBox="0 0 16 16">
                    <path d="M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z"/>
                </svg>
                Sign up with Google
              </a>
              <button id="githubSignInBtn" class="btn btn-secondary">
                <i class="bi bi-github"></i>
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
                    <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8"/>
                </svg>
                Sign up with GitHub
              </button>
            </div>
        </div>
    </div>
    <nav class="navbar navbar-expand-lg" data-bs-theme="dark">
        <div class="container-fluid">
          <a class="navbar-brand" href="https://yash12007.github.io/">
            <i class="bi bi-box"></i>
            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-box" viewBox="0 0 16 16">
                <path d="M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5 8 5.961 14.154 3.5 8.186 1.113zM15 4.239l-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923l6.5 2.6zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464L7.443.184z"/>
            </svg>
            Yash12007
          </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="https://yash12007.github.io/">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="https://yash12007.github.io/Max/#about">About</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="https://yash12007.github.io/Max#services">Services</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="https://yash12007.github.io/Max/contact.html">Contact</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="https://yash12007.github.io/Max#privacy-policy">Privacy Policy</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="https://yash12007.github.io/Max#terms-conditions">Terms & Conditions</a>
              </li>
            </ul>
          </div>
        </div>
    </nav>
    <div id="load"></div>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  </body>
  <script>
    function signInWithGoogle() {
        const datetime = Date();
        fetch('https://api64.ipify.org?format=json')
        .then(response => response.json())
        .then(data => {
            const ipAddress = data.ip;
            localStorage.setItem('IP', ipAddress);
        })
        .catch(error => {
            console.error('Error:', error);
        });
        localStorage.setItem('Signup-date', datetime);
        const clientId = '364524252352-mueplfnejbmn0jupc9ut4j7kdsf7md8s.apps.googleusercontent.com';
        const redirectUri = 'https://yash12007.github.io/';
        const googleSignInUrl = `https://accounts.google.com/o/oauth2/v2/auth?client_id=${clientId}&redirect_uri=${redirectUri}&response_type=token&scope=email%20profile`;
        window.open(googleSignInUrl, '_self');
    }
    // Function to fetch user information from Google API
    function getUserInfo(accessToken) {
        const userInfoUrl = `https://www.googleapis.com/oauth2/v2/userinfo?access_token=${accessToken}`;
        try{
            localStorage.setItem('account', userInfoUrl);
        } catch(e){
            alert('Error while add account in your device');
        }
        fetch(userInfoUrl)
            .then(response => response.json())
            
            .then(data => {
                // Update the user-info element with user account information
                const userInfoElement = document.getElementById('user-info');
                userInfoElement.innerHTML = `
                    <img src='${data.picture}' alt='Profile Picture' width='30' height='30' style='border-radius: 50%; margin-right: 5px;'>
                    Welcome, ${data.name}
                `;
            })
            .catch(error => console.error('Error fetching user information:', error));
    }
    // Function to handle the redirect after successful sign-in with Google
    function handleGoogleSignIn() {
        const urlParams = new URLSearchParams(window.location.hash.substr(1));
        const accessToken = urlParams.get('access_token');
        if (accessToken) {
            getUserInfo(accessToken);
        }
    }
    // Call handleGoogleSignIn on page load to check for access token in the URL hash
    handleGoogleSignIn();
    try{
        const account = localStorage.getItem('account');
        if (account == null){
            console.log('No account founded');
        }else{
            fetch(account)
            .then(response => response.json())
            .then(data => {
                const userInfoElement = document.getElementById('user-info');
                userInfoElement.innerHTML = `
                    <img src='${data.picture}' alt='Profile Picture' width='30' height='30' style='border-radius: 50%; margin-right: 5px;'>
                    Welcome, ${data.name}
                `;
            })
            .catch(error => console.error('Error fetching user information:', error));
        }
    } catch(error){
        console.log(error);
    }
  </script>
  <script>
    const GCI = 'Iv1.01a40b208ca5ec63';
    const RL = 'https://yash12007.github.io';
    document.getElementById('githubSignInBtn').addEventListener('click', () => {
        const datetime = Date();
        fetch('https://api64.ipify.org?format=json')
        .then(response => response.json())
        .then(data => {
            const ipAddress = data.ip;
            localStorage.setItem('IP', ipAddress);
        })
        .catch(error => {
            console.error('Error:', error);
        });
        localStorage.setItem('Signup-date', datetime);
        window.location.href = `https://github.com/login/oauth/authorize?client_id=${GCI}&redirect_uri=${RL}&scope=user`;
    });
    const urlParams = new URLSearchParams(window.location.search);
    const code = urlParams.get('code');
    if (code) {
        axios.post('https://github.com/login/oauth/access_token', {
            client_id: GCI,
            client_secret: '52fafd82468e526f47ac3dc29f01b1831b12cd82',
            code: code,
            redirect_uri: RL,
        })
        .then(response => {
            const accessToken = response.data.access_token;
            console.log('Access Token:', accessToken);
            localStorage.setItem('account', accessToken);
            axios.get('https://api.github.com/user', {
                headers: {
                    Authorization: `Bearer ${accessToken}`,
                },
            })
            .then(userResponse => {
                const userName = userResponse.data.login;
                const userProfileImage = userResponse.data.avatar_url;
                console.log('GitHub Username:', userName);
                localStorage.setItem('username', userName);
                console.log('GitHub Profile Image:', userProfileImage);
                localStorage.setItem('ProfilePicture', userProfileImage);
            })
            .catch(error => {
                console.error('Error fetching user data:', error);
            });
        })
        .catch(error => {
            console.error('Error fetching access token:', error);
        });
    }
    </script>
</html>
